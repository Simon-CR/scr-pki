# Environment Configuration
# Copy this file to .env and update with your settings

# =============================================================================
# GENERAL SETTINGS
# =============================================================================

# Environment: development, staging, production
ENVIRONMENT=production

# Enable debug mode (never use in production)
DEBUG=false

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Disable auth entirely (development only)
AUTH_DISABLED=false

# =============================================================================
# WEB INTERFACE
# =============================================================================

# Domain name for the PKI platform
PKI_DOMAIN=pki.homelab.local

# Web interface port (443 for HTTPS, 8080 for HTTP)
WEB_PORT=8080

# API URL (used by frontend)
API_URL=http://localhost:8000

# =============================================================================
# DATABASE
# =============================================================================

# PostgreSQL credentials
POSTGRES_USER=pki_user
POSTGRES_PASSWORD=CHANGE_THIS_PASSWORD
POSTGRES_DB=pki

# Database URL (auto-constructed, usually no need to change)
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# =============================================================================
# HASHICORP VAULT
# =============================================================================

# Vault address (internal Docker network)
VAULT_ADDR=http://vault:8200

# Vault root token (generated during initialization)
# Leave empty on first run, will be set after vault init
VAULT_TOKEN=

# Development mode (auto-unseals vault, DO NOT USE IN PRODUCTION)
VAULT_DEV_MODE=false
VAULT_DEV_ROOT_TOKEN_ID=dev-root-token

# =============================================================================
# CERTIFICATE AUTHORITY
# =============================================================================

# CA Certificate Information
CA_COMMON_NAME=HomeLab Root CA
CA_ORGANIZATION=HomeLab
CA_ORGANIZATIONAL_UNIT=Certificate Authority
CA_LOCALITY=
CA_STATE=
CA_COUNTRY=US

# CA Certificate Validity (days)
CA_VALIDITY_DAYS=7300

# CA Key Size (bits)
CA_KEY_SIZE=4096

# =============================================================================
# CERTIFICATE DEFAULTS
# =============================================================================

# Default certificate validity (days)
DEFAULT_CERT_VALIDITY_DAYS=3650

# Default key size (bits): 2048, 4096
DEFAULT_KEY_SIZE=4096

# Default signature algorithm: SHA256, SHA384, SHA512
DEFAULT_SIGNATURE_ALGORITHM=SHA256

# Default key type: RSA, ECDSA
DEFAULT_KEY_TYPE=RSA

# =============================================================================
# AUTHENTICATION
# =============================================================================

# Admin user (created on first run)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_THIS_PASSWORD
ADMIN_EMAIL=admin@homelab.local

# JWT Configuration
JWT_SECRET_KEY=GENERATE_RANDOM_SECRET_KEY_HERE
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Session timeout (minutes)
SESSION_TIMEOUT=480

# =============================================================================
# MONITORING
# =============================================================================

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=300

# Health check timeout (seconds)
HEALTH_CHECK_TIMEOUT=10

# Number of retries for failed health checks
HEALTH_CHECK_RETRY_COUNT=3

# Delay between retries (seconds)
HEALTH_CHECK_RETRY_DELAY=30

# =============================================================================
# ALERTS
# =============================================================================

# Alert check interval (seconds)
ALERT_CHECK_INTERVAL=3600

# Days before expiration to trigger alerts
ALERT_THRESHOLD_WARNING=30
ALERT_THRESHOLD_URGENT=14
ALERT_THRESHOLD_CRITICAL=7
ALERT_THRESHOLD_EMERGENCY=1

# Alert frequency (hours between repeat alerts)
ALERT_FREQUENCY_WARNING=168
ALERT_FREQUENCY_URGENT=48
ALERT_FREQUENCY_CRITICAL=24
ALERT_FREQUENCY_EMERGENCY=6

# =============================================================================
# EMAIL NOTIFICATIONS (SMTP)
# =============================================================================

# Enable email notifications
SMTP_ENABLED=false

# SMTP server settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# SMTP credentials
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password

# Email settings
ALERT_EMAIL_FROM=pki@homelab.local
ALERT_EMAIL_TO=admin@homelab.local
ALERT_EMAIL_SUBJECT_PREFIX=[PKI Alert]

# =============================================================================
# WEBHOOK NOTIFICATIONS
# =============================================================================

# Slack
WEBHOOK_SLACK_ENABLED=false
WEBHOOK_SLACK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Discord
WEBHOOK_DISCORD_ENABLED=false
WEBHOOK_DISCORD_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK

# Custom webhook
WEBHOOK_CUSTOM_ENABLED=false
WEBHOOK_CUSTOM_URL=
WEBHOOK_CUSTOM_METHOD=POST
WEBHOOK_CUSTOM_HEADERS=

# =============================================================================
# PUSHOVER (Mobile Push Notifications)
# =============================================================================

PUSHOVER_ENABLED=false
PUSHOVER_USER_KEY=
PUSHOVER_API_TOKEN=
PUSHOVER_PRIORITY=0

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limits (requests per time period)
RATE_LIMIT_PER_IP=100/hour
RATE_LIMIT_PER_USER=500/hour
RATE_LIMIT_CERT_ISSUANCE=10/hour

# =============================================================================
# BACKUP
# =============================================================================

# Backup retention (days)
BACKUP_RETENTION_DAYS=30

# Backup location
BACKUP_DIR=/opt/pki/data/backups

# =============================================================================
# SECURITY
# =============================================================================

# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Enable HTTPS redirect
HTTPS_REDIRECT=false

# Enable HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Worker processes (auto-detected by default)
WORKER_PROCESSES=auto

# Database connection pool size
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40

# Cache TTL (seconds)
CACHE_TTL=300

# Timezone
TZ=UTC

# =============================================================================
# DEVELOPMENT SETTINGS (DO NOT USE IN PRODUCTION)
# =============================================================================

# Hot reload (development only)
HOT_RELOAD=false

# Expose internal ports
EXPOSE_BACKEND_PORT=false
EXPOSE_DB_PORT=false
EXPOSE_VAULT_PORT=false

# =============================================================================
# NOTES
# =============================================================================

# 1. Generate secure random passwords:
#    openssl rand -base64 32
#
# 2. For Gmail SMTP, enable 2FA and create app-specific password:
#    https://myaccount.google.com/apppasswords
#
# 3. After initial deployment, initialize Vault and update VAULT_TOKEN
#
# 4. Change default admin password immediately after first login
#
# 5. This file contains secrets - never commit to version control
